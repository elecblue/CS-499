import{d as Tt,a as D,c as B,f as j}from"./DKazGl9Q.js";import{e as ve,u as at,a as ge,A as pe,aJ as he,aH as bt,T as ye,az as b,Y as ht,Z as u,b as yt,g as t,aI as h,f as G,U as we,c as V,r as X,s as et,t as Y}from"./BcuyA5r3.js";import"./9NV8XBfB.js";import{o as Le,a as be}from"./D4hSV6H1.js";import{e as Mt,d as ze}from"./B4v-DcxL.js";import{i as ot}from"./sXo0-WM_.js";import{s as nt}from"./Bi0-SCxp.js";import{a as Gt}from"./aHgMsoFa.js";import{a as Ct,s as z,b as Pt,c as wt,d as Lt}from"./x8h7vXMJ.js";import{b as st}from"./9IfMiOxD.js";import{p as J}from"./DtBvX_vS.js";function De(e,o,n){ve(()=>{var r=at(()=>o(e,n?.())||{});if(n&&r?.update){var _=!1,m={};ge(()=>{var c=n();pe(c),_&&he(m,c)&&(m=c,r.update(c))}),_=!0}if(r?.destroy)return()=>r.destroy()})}const f=Object.freeze({LOADED:"LOADED",LOADING:"LOADING",UNLOADED:"UNLOADED",UNLOADING:"UNLOADING"}),xe=(e,o="body")=>{let n;async function r(m){if(o=m,typeof o=="string"){if(n=document.querySelector(o),n===null&&(await bt(),n=document.querySelector(o)),n===null)throw new Error(`No element found matching css selector: "${o}"`)}else if(o instanceof HTMLElement)n=o;else throw new TypeError(`Unknown portal target type: ${o===null?"null":typeof o}. Allowed types: string (CSS selector) or HTMLElement.`);n.appendChild(e),e.hidden=!1}function _(){e.parentNode&&e.parentNode.removeChild(e)}return r(o),{update:r,destroy:_}},Ee=(e=3,o=4)=>Array.from({length:e},()=>Math.random().toString(16).slice(-o)).join(""),Ae=()=>{let e=document.querySelector("[data-smiz-portal]");return e==null&&(e=document.createElement("div"),e.setAttribute("data-smiz-portal",""),document.body.appendChild(e)),e},Ht=e=>Object.entries(e).map(([o,n])=>`${o}: ${n};`).join(" "),W=(e,o)=>{const n=parseFloat(e);return e.endsWith("%")?o*n/100:n},Oe=e=>{if(typeof e=="number")return`${e}ms`;const o=/^(\d+)(ms|s)?$/,n=String(e).trim().match(o);if(n){const[,r,_]=n;return`${r}${_||"ms"}`}return console.warn("invalid duration format. falling back to default: 300ms"),"100ms"},zt=(e,o)=>e===o?.tagName?.toUpperCase(),Wt=e=>zt("DIV",e)||zt("SPAN",e),it=e=>zt("IMG",e),Ne=e=>e.complete&&e.naturalHeight!==0,ke=/url(?:\(['"]?)(.*?)(?:['"]?\))/,qt=e=>{if(e){if(it(e))return e.currentSrc;if(Wt(e)){const o=window.getComputedStyle(e).backgroundImage;if(o)return ke.exec(o)?.[1]}}},Se=e=>{if(e)return it(e)?e.alt??void 0:e.getAttribute("aria-label")??void 0},jt=({height:e,offset:o,width:n})=>Math.min((window.innerWidth-o*2)/n,(window.innerHeight-o*2)/e),Ie=({container_height:e,container_width:o,height:n,width:r,offset:_})=>{const m=jt({height:n,width:r,offset:_}),c=Math.max(r/o,n/e);return m>1?c:m*c},Dt=({container_height:e,container_width:o,height:n,width:r,offset:_,has_scalable_src:m})=>!e||!o?1:!m&&n&&r?Ie({container_height:e,container_width:o,height:n,width:r,offset:_}):jt({height:e,width:o,offset:_}),Ue=({container_height:e,container_left:o,container_top:n,container_width:r,height:_,width:m,offset:c,has_scalable_src:l})=>{const y=Dt({container_height:e,container_width:r,height:_,width:m,offset:c,has_scalable_src:l});return{top:`${n}px`,left:`${o}px`,width:`${r*y}px`,height:`${e*y}px`,transform:`translate(0, 0) scale(${1/y})`}},Me=({background_position:e,background_size:o,container_height:n,container_width:r,container_left:_,container_top:m,height:c,width:l,offset:y,has_scalable_src:U})=>{function I(){const A=r/l,p=n/c;if(o==="cover")return Math.max(A,p);if(o==="contain")return Math.min(A,p);const[C="50%",P="50%"]=o.split(" "),M=W(C,r),q=W(P,n);return Math.min(M/l,q/c)}const a=I(),[v="50%",d="50%"]=e.split(" "),O=W(v,r-l*a),E=W(d,n-c*a),g=Dt({container_height:c*a,container_width:l*a,height:c,width:l,offset:y,has_scalable_src:U});return{top:`${m+E}px`,left:`${_+O}px`,width:`${l*a*g}px`,height:`${c*a*g}px`,transform:`translate(0,0) scale(${1/g})`}},Ge=({object_fit:e,object_position:o,container_height:n,container_width:r,container_left:_,container_top:m,height:c,width:l,offset:y,has_scalable_src:U})=>{e==="scale-down"&&(l<=r&&c<=n?e="none":e="contain");function I(){const A=r/l,p=n/c;return e==="cover"||e==="fill"?Math.max(A,p):e==="contain"?Math.min(A,p):1}const a=I(),v=Dt({container_height:c*a,container_width:l*a,height:c,width:l,offset:y,has_scalable_src:U}),[d="50%",O="50%"]=o.split(" "),E=W(d,r-l*a),g=W(O,n-c*a);return e==="cover"||e==="contain"?{top:`${m+g}px`,left:`${_+E}px`,width:`${l*a*v}px`,height:`${c*a*v}px`,transform:`translate(0,0) scale(${1/v})`}:e==="none"?{top:`${m+g}px`,left:`${_+E}px`,width:`${l*v}px`,height:`${c*v}px`,transform:`translate(0,0) scale(${1/v})`}:e==="fill"?{width:`${r*v}px`,height:`${n*v}px`,transform:`translate(0,0) scale(${1/v})`}:{}},Ce=/\.svg$/i,Pe=({is_zoomed:e,loaded_img_el:o,offset:n,target_el:r,should_refresh:_,img_src:m})=>{const c=m?.slice?.(0,18)==="data:image/svg+xml"||!!(m&&Ce.test(m)),l=r.getBoundingClientRect(),y=window.getComputedStyle(r),U=o!=null&&Wt(r),I=o!=null&&!U,a=o?.naturalWidth||l.width,v=o?.naturalHeight||l.height,d=Ue({container_height:l.height,container_width:l.width,container_top:l.top,container_left:l.left,height:v,width:a,offset:n,has_scalable_src:c}),O=U?Me({background_position:y.backgroundPosition,background_size:y.backgroundSize,container_height:l.height,container_width:l.width,container_left:l.left,container_top:l.top,height:v,width:a,offset:n,has_scalable_src:c}):{},E=I?Ge({object_position:y.objectPosition,object_fit:y.objectFit,container_height:l.height,container_width:l.width,container_left:l.left,container_top:l.top,height:v,width:a,offset:n,has_scalable_src:c}):{},g=Object.assign({},d,E,O);if(e){const A=window.innerWidth/2,p=window.innerHeight/2,C=parseFloat(String(g.left||0))+parseFloat(String(g.width||0))/2,P=parseFloat(String(g.top||0))+parseFloat(String(g.height||0))/2,M=A-C,q=p-P;_&&(g["transition-duration"]="0.01ms"),g.transform=`translate(${M}px,${q}px) scale(1)`}return g},Ft=e=>e?{height:`${e.offsetHeight}px`,width:`${e.offsetWidth}px`,top:`${e.offsetTop}px`,left:`${e.offsetLeft}px`}:{};var He=Tt('<svg aria-hidden="true" data-smiz-btn-unzoom-icon="" fill="currentColor" focusable="false" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"></path></svg>');function qe(e){var o=He();D(e,o)}var Fe=Tt('<svg aria-hidden="true" data-smiz-btn-zoom-icon="" fill="currentColor" focusable="false" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"></path></svg>');function Re(e){var o=Fe();D(e,o)}const Te=["","anonymous","use-credentials"],We=["img",'[role="img"]',"[data-zoom]"].map(e=>`${e}:not([aria-hidden="true"])`).join(","),Rt={overflow:"",width:""};var je=j('<img data-smiz-modal-img=""/>'),Ze=j('<button data-smiz-btn-unzoom="" type="button"><!></button>'),Be=j("<!> <!>",1),Ve=j('<button data-smiz-btn-zoom="" type="button"><!></button>'),Xe=j('<!>  <dialog aria-modal="true" data-smiz-modal=""><div></div> <div data-smiz-modal-content=""><!></div></dialog>',1),Ye=j("<div><!></div> <!>",1);function ro(e,o){ye(o,!0);const n=s=>{var i=je();st(i,L=>u(p,L),()=>t(p)),Y(()=>{z(i,"alt",t(ct)),z(i,"crossorigin",t(Jt)),z(i,"src",t(At)),z(i,"srcset",t(Yt)),z(i,"sizes",t(Xt)),z(i,"id",t(Et)),Pt(i,t(Qt)),z(i,"width",t(dt).width),z(i,"height",t(dt).height)}),D(s,i)},r=s=>{var i=Ze();i.__click=ee;var L=V(i);{var N=w=>{var k=B(),x=G(k);nt(x,()=>o.icon_unzoom),D(w,k)},Z=w=>{qe(w)};ot(L,w=>{o.icon_unzoom?w(N):w(Z,!1)})}X(i),Y(()=>{z(i,"aria-label",m()),wt(i,1,Lt(o.class_button))}),D(s,i)},_=s=>{var i=B(),L=G(i);{var N=w=>{var k=B(),x=G(k);nt(x,()=>o.zoom_content,()=>({img:n,button_unzoom:r,modal_state:t(d),handle_unzoom:F})),D(w,k)},Z=w=>{var k=Be(),x=G(k);n(x);var tt=et(x,2);r(tt),D(w,k)};ot(L,w=>{o.zoom_content?w(N):w(Z,!1)})}D(s,i)};let m=J(o,"a11y_name_button_unzoom",3,"Minimize image"),c=J(o,"a11y_name_button_zoom",3,"Expand image"),l=J(o,"duration",3,"300ms"),y=J(o,"wrap_element",3,"div"),U=J(o,"zoom_margin",3,0),I=b(""),a=b(null),v=b(null),d=b(ht(f.UNLOADED)),O=b(!1),E=b(null),g=b(null),A=b(null),p=b(null),C=b(!1);const P=h(()=>o.is_zoomed??t(C));let M=b(ht(Rt)),q=b(void 0),rt=b(void 0);const xt=h(()=>`smiz-modal-${t(I)}`),Et=h(()=>`smiz-modal-img-${t(I)}`),Zt=h(()=>t(d)===f.LOADING||t(d)===f.LOADED),Bt=h(()=>K()?"found":"not-found"),Vt=h(()=>t(d)===f.UNLOADED||t(d)===f.UNLOADING?"hidden":"visible"),lt=h(()=>it(t(a))),ct=h(()=>Se(t(a))),At=h(()=>qt(t(a))),Xt=h(()=>t(lt)?t(a).sizes:void 0),Yt=h(()=>t(lt)?t(a).srcset:void 0),Jt=h(()=>{if(!t(lt))return;const s=t(a).crossOrigin;return typeof s=="string"&&Te.includes(s)?s:void 0}),Kt=h(()=>t(ct)?`${c()}: ${t(ct)}`:c()),dt=h(()=>K()?Pe({is_zoomed:t(P)&&t(Zt),loaded_img_el:t(v),offset:U(),target_el:t(a),should_refresh:t(O),img_src:t(At)}):{}),Qt=h(()=>Ht(t(dt)));let _t=b(ht({}));const $t=h(()=>Ht(t(_t)));Le(async()=>{await te(),Q(),u(I,Ee(),!0)}),be(()=>{t(d)!==f.UNLOADED&&Nt(),t(a)?.removeEventListener("load",Q),t(a)?.removeEventListener("click",mt),t(p)?.removeEventListener("transitionend",$),t(rt)?.disconnect(),window.removeEventListener("resize",vt),window.removeEventListener("wheel",ft),document.removeEventListener("keydown",ut,!0)}),yt(()=>{t(d)===f.LOADING?(window.addEventListener("resize",vt,{passive:!0}),document.addEventListener("keydown",ut,!0)):t(d)===f.LOADED?window.addEventListener("wheel",ft,{passive:!0}):t(d)===f.UNLOADING?(re(),window.removeEventListener("wheel",ft),document.removeEventListener("keydown",ut,!0)):t(d)===f.UNLOADED&&(at(()=>Nt()),window.removeEventListener("resize",vt),t(p)?.removeEventListener("transitionend",$),t(g)?.close())}),yt(()=>{t(P)&&t(d)===f.UNLOADED?at(()=>ae()):!t(P)&&t(d)===f.LOADED&&at(()=>ie())}),yt(()=>{const s=Oe(l());document.querySelector(":root").style.setProperty("--smiz-td",s)});function Ot(s){t(d)!==s&&u(d,s,!0)}function K(){return t(a)&&t(v)&&window.getComputedStyle(t(a)).display!=="none"}async function te(){await bt(),t(E)&&(u(a,t(E).querySelector(We),!0),t(a)&&(t(a).addEventListener("load",Q),t(a).addEventListener("click",mt),t(v)||Q(),t(rt)?.observe(t(a)),u(rt,new ResizeObserver(s=>{const i=s[0];i.target&&(u(a,i.target,!0),u(_t,Ft(t(a)),!0))}),!0)))}function Q(){if(!t(a))return;const s=qt(t(a));if(!s)return;const i=new Image;it(t(a))&&(i.sizes=t(a).sizes,i.srcset=t(a).srcset,i.crossOrigin=t(a).crossOrigin),i.src=s;const L=()=>{u(v,i,!0),u(_t,Ft(t(a)),!0)};i.decode().then(L).catch(()=>{if(Ne(i)){L();return}i.onload=L})}function mt(){t(d)!==f.UNLOADING&&(o.is_zoomed===void 0?u(C,!0):K()&&o.on_zoom_change?.(!0))}function F(){t(d)!==f.LOADING&&(o.is_zoomed===void 0?u(C,!1):o.on_zoom_change?.(!1))}function ee(s){s.preventDefault(),s.stopPropagation(),F()}function oe(s){s.preventDefault()}function ne(s){(s.target===t(A)||s.target===t(p))&&(s.stopPropagation(),F())}function se(s){s.stopPropagation(),F()}function ut(s){s.key==="Escape"&&(s.preventDefault(),s.stopPropagation(),F())}function ft(s){s.ctrlKey||(s.stopPropagation(),queueMicrotask(()=>{F()}))}function vt(){u(O,!0),bt().then(()=>u(O,!1))}function ae(){le(),t(g)?.showModal(),t(p)?.addEventListener("transitionend",$),Ot(f.LOADING)}function ie(){Ot(f.UNLOADING)}function $(){clearTimeout(t(q)),t(d)===f.LOADING?u(d,f.LOADED,!0):t(d)===f.UNLOADING&&(u(O,!1),u(d,f.UNLOADED,!0))}function re(){if(t(p)){const s=window.getComputedStyle(t(p)).transitionDuration,i=parseFloat(s);if(i){const L=i*(s.endsWith("ms")?1:1e3)+50;u(q,setTimeout($,L),!0)}}}function le(){u(M,{overflow:document.body.style.overflow,width:document.body.style.width},!0);const s=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${s}px`}function Nt(){document.body.style.width=t(M).width,document.body.style.overflow=t(M).overflow,u(M,Rt,!0)}var kt=B(),ce=G(kt);Gt(ce,y,!1,(s,i)=>{Ct(s,()=>({"aria-owns":t(xt),"data-smiz":""}));var L=Ye(),N=G(L),Z=V(N);nt(Z,()=>o.children),X(N),st(N,x=>u(E,x),()=>t(E));var w=et(N,2);{var k=x=>{var tt=Xe(),St=G(tt);Gt(St,y,!1,(H,pt)=>{Ct(H,()=>({"data-smiz-ghost":"",style:t($t)}));var R=Ve();R.__click=mt;var _e=V(R);{var me=T=>{var Ut=B(),fe=G(Ut);nt(fe,()=>o.icon_zoom),D(T,Ut)},ue=T=>{Re(T)};ot(_e,T=>{o.icon_zoom?T(me):T(ue,!1)})}X(R),Y(()=>{z(R,"aria-label",t(Kt)),wt(R,1,Lt(o.class_button))}),D(pt,R)});var S=et(St,2);S.__click=ne;var It=V(S),gt=et(It,2),de=V(gt);_(de),X(gt),st(gt,H=>u(A,H),()=>t(A)),X(S),De(S,(H,pt)=>xe?.(H,pt),Ae),st(S,H=>u(g,H),()=>t(g)),Y(()=>{z(S,"aria-labelledby",t(Et)),wt(S,1,Lt(o.class_dialog)),z(S,"id",t(xt)),z(It,"data-smiz-modal-overlay",t(Vt))}),Mt("close",S,se),Mt("cancel",S,oe),D(x,tt)};ot(w,x=>{K()&&x(k)})}Y(()=>{z(N,"data-smiz-content",t(Bt)),Pt(N,`visibility: ${t(d)===f.UNLOADED?"visible":"hidden"};`)}),D(i,L)}),D(e,kt),we()}ze(["click"]);export{ro as Z};
